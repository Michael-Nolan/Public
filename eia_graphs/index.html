<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.plot.ly/plotly-3.0.1.min.js" charset="utf-8"></script>

    <style>
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>

<body>
    <div id="intro">
        <h1>US Electricity Graphs</h1>
        <br>
        <p>
            The US Energy Information Agency provides monthly data on US electricity generation.
            This site uses that data and provides some graphs to make it easier to visualize whats happening.
            If there are any other graphs you would like to see, open an issue at
            https://github.com/Michael-Nolan/Public
        </p>

    </div>
    <div class="radio-container">
        <h3>Select an option:</h3>

        <div class="option">
            <input type="radio" id="option1" name="choice" value="Option 1" onchange="handleSelection(this)">
            <label for="option1">All Sources</label>
        </div>

        <div class="option">
            <input type="radio" id="option2" name="choice" value="Option 2" onchange="handleSelection(this)">
            <label for="option2">Fossil Fuel & Carbon Free</label>
        </div>

        <div class="option">
            <input type="radio" id="option3" name="choice" value="Option 3" onchange="handleSelection(this)">
            <label for="option3">Fossil Fuel, Nuclear, Renewables</label>
        </div>
    </div>


    <div id="result" class="result">
        <p>You selected: <span id="selected-option">None</span></p>
    </div>
    <div>
        <strong>Jump to:</strong>
        <ul>
            <li><a href="#plotNetGenMonthly"> Net Generation Monthly</a></li>
            <li><a href="#plotPercentGenMonthly"> Percent Generation Monthly</a></li>
            <li><a href="#plotNetGenRolling"> Net Generation 12 Month Rolling</a></li>
            <li><a href="#plotPercentGenRolling"> Percent Generation 12 Month Rolling</a></li>
            <li><a href="#plotPercentGrowthMonthly"> Percent Generation Growth Monthly</a></li>
            <li><a href="#plotPercentGrowthYearly"> Percent Generation Growth 12 Month Rolling</a></li>
            <li><a href="#plotAbsoluteGrowthMonthly"> Absolute Generation Growth Monthly</a></li>
            <li><a href="#plotAbsoluteGrowthYearly"> Absolute Generation Growth 12 Month Rolling</a></li>



            <!-- 
                TODO:
                Absolute Growth
                2nd Derivative
                3rd Derivative

                Enhance UI so that user can select desired chart type. (rather than displaying all of them)
            -->


        </ul>
    </div>

    <div id="plotNetGenMonthlyOuter">
        <p>This graph shows the xyz</p>
        <div id="plotNetGenMonthly" style="display: flex; justify-content: center;"></div>
    </div>

    <div id="plotPercentGenMonthly" style="display: flex; justify-content: center;"></div>
    <div id="plotNetGenRolling" style="display: flex; justify-content: center;"></div>
    <div id="plotPercentGenRolling" style="display: flex; justify-content: center;"></div>
    <div id="plotPercentGrowthMonthly" style="display: flex; justify-content: center;"></div>
    <div id="plotPercentGrowthYearly" style="display: flex; justify-content: center;"></div>
    <div id="plotAbsoluteGrowthMonthly" style="display: flex; justify-content: center;"></div>
    <div id="plotAbsoluteGrowthYearly" style="display: flex; justify-content: center;"></div>



    <!-- Link the external JavaScript file containing data -->
    <script type="text/javascript" src="data.js" defer></script>
    <script type="text/javascript" src="eia.js" defer></script>
    <script>
        function handleSelection(radioButton) {
            // Update the result div
            document.getElementById("selected-option").textContent = radioButton.value;
            document.getElementById("result").style.display = "block";

            switch (radioButton.value) {
                case "Option 1":
                    plotAll();
                    break;
                case "Option 2":
                    plotCat2();
                    break;
                case "Option 3":
                    plotCat3();
                    break;
            }
        }


        function plotAll() {
            plotNetGenMonthly("plotNetGenMonthly", structuredClone(allSourceData));
            plotPercentGenMonthly("plotPercentGenMonthly", structuredClone(allSourceData));
            plotNetGenRolling("plotNetGenRolling", convertToRolling(structuredClone(allSourceData), 12));
            plotPercentGenRolling("plotPercentGenRolling", convertToRolling(structuredClone(allSourceData), 12));
            plotPercentGrowthMonthly("plotPercentGrowthMonthly", calculateGrowth(convertToRolling(structuredClone(allSourceData), 12), 1));
            plotPercentGrowthYearly("plotPercentGrowthYearly", calculateGrowth(convertToRolling(structuredClone(allSourceData), 12), 12));
            plotNetGenRolling("plotAbsoluteGrowthMonthly", calculateAbsoluteGrowth(convertToRolling(structuredClone(allSourceData), 12), 1));
            plotNetGenRolling("plotAbsoluteGrowthYearly", calculateAbsoluteGrowth(convertToRolling(structuredClone(allSourceData), 12), 12));
        }

        function plotCat2() {
            plotNetGenMonthly("plotNetGenMonthly", structuredClone(twoSourceData));
            plotPercentGenMonthly("plotPercentGenMonthly", structuredClone(twoSourceData));
            plotNetGenRolling("plotNetGenRolling", convertToRolling(structuredClone(twoSourceData), 12));
            plotPercentGenRolling("plotPercentGenRolling", convertToRolling(structuredClone(twoSourceData), 12));
            plotPercentGrowthMonthly("plotPercentGrowthMonthly", calculateGrowth(convertToRolling(structuredClone(twoSourceData), 12), 1));
            plotPercentGrowthYearly("plotPercentGrowthYearly", calculateGrowth(convertToRolling(structuredClone(twoSourceData), 12), 12));
            plotNetGenRolling("plotAbsoluteGrowthMonthly", calculateAbsoluteGrowth(convertToRolling(structuredClone(twoSourceData), 12), 1));
            plotNetGenRolling("plotAbsoluteGrowthYearly", calculateAbsoluteGrowth(convertToRolling(structuredClone(twoSourceData), 12), 12));
        }

        function plotCat3() {
            plotNetGenMonthly("plotNetGenMonthly", structuredClone(threeSourceData));
            plotPercentGenMonthly("plotPercentGenMonthly", structuredClone(threeSourceData));
            plotNetGenRolling("plotNetGenRolling", convertToRolling(structuredClone(threeSourceData), 12));
            plotPercentGenRolling("plotPercentGenRolling", convertToRolling(structuredClone(threeSourceData), 12));
            plotPercentGrowthMonthly("plotPercentGrowthMonthly", calculateGrowth(convertToRolling(structuredClone(threeSourceData), 12), 1));
            plotPercentGrowthYearly("plotPercentGrowthYearly", calculateGrowth(convertToRolling(structuredClone(threeSourceData), 12), 12));
            plotNetGenRolling("plotAbsoluteGrowthMonthly", calculateAbsoluteGrowth(convertToRolling(structuredClone(threeSourceData), 12), 1));
            plotNetGenRolling("plotAbsoluteGrowthYearly", calculateAbsoluteGrowth(convertToRolling(structuredClone(threeSourceData), 12), 12));
        }
    </script>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            populateData();
            plotAll();
        });
    </script>
</body>

</html>